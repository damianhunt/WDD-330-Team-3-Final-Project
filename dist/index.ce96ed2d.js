class t{async getProducts(){try{let t=await fetch(items);if(t.ok){return await t.json()}}catch(t){return console.log(t)}}}class e{static saveProducts(t){localStorage.setItem("products",JSON.stringify(t))}static getProduct(t){return JSON.parse(localStorage.getItem("products")).find((e=>e.id==t))}static saveCurrentCart(t){localStorage.setItem("cart",JSON.stringify(t))}static getCartFromLocalStorage(){let t=JSON.parse(localStorage.getItem("cart"));if(null!==t)return t;return[]}}function a(t,e,a,r,n="afterbegin",s=!1){e.insertAdjacentHTML("afterbegin",t),r&&r(a)}!async function(){const t=await loadTemplate("../partials/header.html"),e=document.querySelector("#main-header"),r=await loadTemplate("../partials/footer.html"),n=document.querySelector("#main-footer");a(t,e),a(r,n)}();const r=document.querySelector(".cart-btn"),n=document.querySelector(".close-cart"),s=document.querySelector(".clear-cart"),i=(document.querySelector(".nav-icon-cart"),document.querySelector(".cart")),c=document.querySelector(".cart-overlay"),o=document.querySelector(".products-area"),l=document.querySelector(".cart-items"),d=document.querySelector(".cart-total"),u=document.querySelector(".cart-content");let m=[],h=[];class p{displayProducts(t){let e="";t.forEach((t=>{e+=`<article class="product">\n            <div class="img-container">\n              <img src=${t.image} alt="" class="product-img" />\n              <button class="bag-btn" data-id=${t.id}>\n                <i class="fas fa-shopping-cart"></i>\n                add to bag\n              </button>\n            </div>\n            <h3>${t.title}</h3>\n            <P>popularity ${t.rating.rate}</p>\n            <h4>R ${t.price}</h4>\n          </article>`})),o.innerHTML=e}getBtnsBag(){const t=[...document.querySelectorAll(".bag-btn")];h=t,t.forEach((t=>{let a=t.dataset.id;m.find((t=>t.id===a))&&(t.innerText="In Cart",t.disabled=!0),t.addEventListener("click",(t=>{t.target.innerText="In Cart",t.target.disabled=!0;let r={...e.getProduct(a),units:1};m=[...m,r],e.saveCurrentCart(m),this.updateSetCartValues(m),this.addCartItem(r),this.showCaseCart()}))}))}updateSetCartValues(t){let e=0,a=0;t.map((t=>{e+=t.price*t.units,a+=t.units})),d.innerText=parseFloat(e.toFixed(2)),l.innerText=a}addCartItem(t){const e=document.createElement("div");e.classList.add("cart-item"),e.innerHTML=`\n            <img src=${t.image} alt=${t.title}>\n            <div>\n                <h4>${t.title}</h4>\n                <h5>R ${t.price}</h5>\n                <span class="remove-item" data-id=${t.id}>\n        remove\n                </span>\n            </div>\n            <div>\n                <i class="fas fa-chevron-up" data-id=${t.id}></i>\n                <p class="item-amount">${t.units}</p>\n                <i class="fas fa-chevron-down" data-id=${t.id}></i>\n            </div>`,u.appendChild(e)}showCaseCart(){c.classList.add("transparentCover"),i.classList.add("showCaseCart")}setUpApplication(){m=e.getCartFromLocalStorage(),this.updateSetCartValues(m),this.fillupCart(m),r.addEventListener("click",this.showCaseCart),n.addEventListener("click",this.hideCart)}fillupCart(t){t.forEach((t=>{this.addCartItem(t)}))}hideCart(){c.classList.remove("transparentCover"),i.classList.remove("showCaseCart")}cartFunctionality(){s.addEventListener("click",(()=>{this.clearCart()})),u.addEventListener("click",(t=>{if(t.target.classList.contains("remove-item")){let e=t.target,a=e.dataset.id;u.removeChild(e.parentElement.parentElement),this.removeThisItem(parseInt(a))}else if(t.target.classList.contains("fa-chevron-up")){let a=t.target,r=a.dataset.id,n=m.find((t=>t.id===parseInt(r)));n.units=n.units+1,e.saveCurrentCart(m),this.updateSetCartValues(m),a.nextElementSibling.innerText=n.units}else if(t.target.classList.contains("fa-chevron-down")){let a=t.target,r=a.dataset.id,n=m.find((t=>t.id===parseInt(r)));n.units=n.units-1,n.units>0?(e.saveCurrentCart(m),this.updateSetCartValues(m),a.previousElementSibling.innerText=n.units):(u.removeChild(a.parentElement.parentElement),this.removeThisItem(parseInt(r)))}}))}clearCart(){for(m=[],this.updateSetCartValues(m),e.saveCurrentCart(m);u.children.length>0;)u.removeChild(u.children[0]);h.forEach((t=>{t.disabled=!1,t.innerHTML='<i class="fas fa-shopping-cart"></i>add to cart'})),this.hideCart()}removeThisItem(t){console.log(t),m=m.filter((e=>e.id!==t)),console.log(m),this.updateSetCartValues(m),e.saveCurrentCart(m);let a=this.getSingleBtn(t);a.disabled=!1,a.innerHTML='<i class="fas fa-shopping-cart"></i>add to cart'}getSingleBtn(t){return h.find((e=>e.dataset.id===t))}}document.addEventListener("DOMContentLoaded",(()=>{const a=new p,r=new t;a.setUpApplication(),r.getProducts().then((t=>{a.displayProducts(t),e.saveProducts(t)})).then((()=>{a.getBtnsBag(),a.cartFunctionality()}))}));document.getElementById("hamburgerBtn").onclick=function(){document.getElementById("primaryNav").classList.toggle("open"),document.getElementById("hamburgerBtn").classList.toggle("open")};
//# sourceMappingURL=index.ce96ed2d.js.map
