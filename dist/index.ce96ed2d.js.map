{"mappings":"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","sources":["src/js/getproducts.mjs","src/js/localStorage.mjs","src/js/utils.mjs","src/js/main.js"],"sourcesContent":["let url = \"https://server.com/data/products\";\r\n//getting the products from API\r\n\r\nexport default class Products {\r\n  async getProducts() {\r\n    try {\r\n      let result = await fetch(items);\r\n      if (result.ok) {\r\n        let data = await result.json();\r\n       //console.log(data);\r\n        return data;\r\n        \r\n      }\r\n    } catch (error) {\r\n      return console.log(error);\r\n    }\r\n  }\r\n}\r\n","//local storage\r\n// establish a function that takes an array and stringfy it\r\n/*\r\nwhen you access the localStorage there is many functions available to you this time use the setItem\r\n then pass the first argument is a key that will be matched with an array of the products passed as an argument \r\n\r\n*/\r\nexport default class Storage {\r\n  //this saves the products catalogue to the local storage\r\n  static saveProducts(products) {\r\n    localStorage.setItem(\"products\", JSON.stringify(products));\r\n  }\r\n\r\n  //this one gets the product we have selected based on product id from the localstorage\r\n  static getProduct(id) {\r\n    let products = JSON.parse(localStorage.getItem(\"products\"));\r\n    return products.find((product) => product.id == id);\r\n  }\r\n\r\n  //this saves the products selected to the local storage under cart\r\n  static saveCurrentCart(cart) {\r\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  }\r\n\r\n  //get cart from local storage\r\n  static getCartFromLocalStorage() {\r\n    let cartData = JSON.parse(localStorage.getItem(\"cart\"));\r\n    if (cartData !== null) {\r\n      return  cartData;\r\n    } else {\r\n      let cart = [];\r\n      return  cart;\r\n    }\r\n  }\r\n}\r\n","export function renderListWithTemplate(\r\n    templateFn,\r\n    parentElement,\r\n    list,\r\n    position = \"afterbegin\",\r\n    clear = false\r\n  ) {\r\n    const htmlStrings = list.map(templateFn);\r\n    if (clear) {\r\n      parentElement.innerHTML = \"\";\r\n    }\r\n    parentElement.insertAdjacentHTML(position, htmlStrings.join(\"\"));\r\n  }\r\n  \r\n  export function renderWithTemplate(\r\n    template,\r\n    parentElement,\r\n    data,\r\n    callback,\r\n    position = \"afterbegin\",\r\n    clear = false\r\n  ) {\r\n    parentElement.insertAdjacentHTML(\"afterbegin\", template);\r\n    if (callback) {\r\n      callback(data);\r\n    }\r\n  }\r\n  \r\n  export async function loadHeaderFooter() {\r\n    const templateForHeader = await loadTemplate(\"../partials/header.html\");\r\n    const elementForHeader = document.querySelector(\"#main-header\");\r\n    const templateForFooter = await loadTemplate(\"../partials/footer.html\");\r\n    const elementForFooter = document.querySelector(\"#main-footer\");\r\n  \r\n    renderWithTemplate(templateForHeader, elementForHeader);\r\n    renderWithTemplate(templateForFooter, elementForFooter);\r\n  }","//import Ui from \"./displayProducts.mjs\";\r\nimport Products from \"./getproducts.mjs\";\r\nimport Storage from \"./localStorage.mjs\";\r\nimport { loadHeaderFooter } from './utils.mjs';\r\n\r\nloadHeaderFooter();\r\n\r\n//variables\r\nconst cartBtn = document.querySelector(\".cart-btn\");\r\nconst closeCartButton = document.querySelector(\".close-cart\");\r\nconst clearCartButton = document.querySelector(\".clear-cart\");\r\nconst cartNavBtn = document.querySelector(\".nav-icon-cart\");\r\n\r\n//cart nodes from the dom\r\nconst cartDom = document.querySelector(\".cart\");\r\nconst cartOverlay = document.querySelector(\".cart-overlay\");\r\n\r\nconst productsInTheDOM = document.querySelector(\".products-area\");\r\nconst cartIterms = document.querySelector(\".cart-items\");\r\nconst cartTotal = document.querySelector(\".cart-total\");\r\nconst cartContent = document.querySelector(\".cart-content\");\r\n//const cartContent = document.querySelector(\".cart-content\");\r\n//\r\nlet cart = [];\r\n\r\n//\r\nlet buttonsInTheDOM = [];\r\n//generate Ui\r\nclass UI {\r\n  displayProducts(stock) {\r\n    let result = \"\";\r\n    stock.forEach((product) => {\r\n      result += `<article class=\"product\">\r\n            <div class=\"img-container\">\r\n              <img src=${product.image} alt=\"\" class=\"product-img\" />\r\n              <button class=\"bag-btn\" data-id=${product.id}>\r\n                <i class=\"fas fa-shopping-cart\"></i>\r\n                add to bag\r\n              </button>\r\n            </div>\r\n            <h3>${product.title}</h3>\r\n            <P>popularity ${product.rating.rate}</p>\r\n            <h4>R ${product.price}</h4>\r\n          </article>`;\r\n    });\r\n    productsInTheDOM.innerHTML = result;\r\n  }\r\n\r\n  getBtnsBag() {\r\n    const buttons = [...document.querySelectorAll(\".bag-btn\")];\r\n    buttonsInTheDOM = buttons;\r\n    //console.log(buttons);\r\n    buttons.forEach((button) => {\r\n      let id = button.dataset.id;\r\n      let inTheCart = cart.find((item) => item.id === id);\r\n      if (inTheCart) {\r\n        button.innerText = \"In Cart\";\r\n        button.disabled = true;\r\n      }\r\n\r\n      button.addEventListener(\"click\", (event) => {\r\n        event.target.innerText = \"In Cart\";\r\n        event.target.disabled = true;\r\n        //get product from the stock or products from local storage and store it in a object\r\n        let cartItem = { ...Storage.getProduct(id), units: 1 };\r\n\r\n        //add item or product clicked or chosen to the cartarray\r\n        cart = [...cart, cartItem];\r\n\r\n        //save stored cart to the local storage\r\n        Storage.saveCurrentCart(cart);\r\n        //set cartvalues =>cart array\r\n        this.updateSetCartValues(cart);\r\n        //diplay cart item\r\n        this.addCartItem(cartItem);\r\n\r\n        //show cart\r\n        this.showCaseCart();\r\n      });\r\n    });\r\n  }\r\n\r\n  updateSetCartValues(cart) {\r\n    let tempTotal = 0;\r\n    let itemsTotal = 0;\r\n\r\n    cart.map((item) => {\r\n      tempTotal += item.price * item.units;\r\n      itemsTotal += item.units;\r\n    });\r\n    cartTotal.innerText = parseFloat(tempTotal.toFixed(2));\r\n    cartIterms.innerText = itemsTotal;\r\n  }\r\n  /*The problem is that when i click add item it is added to cart but then not injected into the dom*/\r\n  //this function creates a templateand inserts items that has been selected\r\n  addCartItem(item) {\r\n    const div = document.createElement(\"div\");\r\n    div.classList.add(\"cart-item\");\r\n    div.innerHTML = `\r\n            <img src=${item.image} alt=${item.title}>\r\n            <div>\r\n                <h4>${item.title}</h4>\r\n                <h5>R ${item.price}</h5>\r\n                <span class=\"remove-item\" data-id=${item.id}>\r\n        remove\r\n                </span>\r\n            </div>\r\n            <div>\r\n                <i class=\"fas fa-chevron-up\" data-id=${item.id}></i>\r\n                <p class=\"item-amount\">${item.units}</p>\r\n                <i class=\"fas fa-chevron-down\" data-id=${item.id}></i>\r\n            </div>`;\r\n    //console.log(cartDom)\r\n    cartContent.appendChild(div);\r\n\r\n    //cartDom.appendChild(cartContent);\r\n    //cartOverlay.appendChild(cartDom);\r\n    //console.log(cartDom)\r\n  }\r\n\r\n  showCaseCart() {\r\n    cartOverlay.classList.add(\"transparentCover\");\r\n    cartDom.classList.add(\"showCaseCart\");\r\n  }\r\n\r\n  setUpApplication() {\r\n    cart = Storage.getCartFromLocalStorage();\r\n    this.updateSetCartValues(cart);\r\n    this.fillupCart(cart);\r\n    cartBtn.addEventListener(\"click\", this.showCaseCart);\r\n    closeCartButton.addEventListener(\"click\", this.hideCart);\r\n  }\r\n\r\n  fillupCart(cart) {\r\n    cart.forEach((item) => {\r\n      this.addCartItem(item);\r\n    });\r\n  }\r\n\r\n  hideCart() {\r\n    cartOverlay.classList.remove(\"transparentCover\");\r\n    cartDom.classList.remove(\"showCaseCart\");\r\n  }\r\n\r\n  cartFunctionality() {\r\n    //this is for cart clear button\r\n    clearCartButton.addEventListener(\"click\", () => {\r\n      this.clearCart();\r\n    });\r\n\r\n    //inside cart logic\r\n    cartContent.addEventListener(\"click\", (event) => {\r\n      if (event.target.classList.contains(\"remove-item\")) {\r\n        //store the item in a variable\r\n        let removeThisItem = event.target;\r\n        let itemId = removeThisItem.dataset.id;\r\n\r\n        // this line below is for removing from the dom\r\n        cartContent.removeChild(removeThisItem.parentElement.parentElement);\r\n        //this one below is for removing from cart array\r\n        this.removeThisItem(parseInt(itemId));\r\n      } else if (event.target.classList.contains(\"fa-chevron-up\")) {\r\n        let addunits = event.target;\r\n        let itemId = addunits.dataset.id;\r\n        let temperalItem = cart.find((item) => item.id === parseInt(itemId));\r\n        temperalItem.units = temperalItem.units + 1;\r\n        Storage.saveCurrentCart(cart);\r\n        this.updateSetCartValues(cart);\r\n        addunits.nextElementSibling.innerText = temperalItem.units;\r\n\r\n      } else if (event.target.classList.contains(\"fa-chevron-down\")) {\r\n        let subtractunits = event.target;\r\n        let itemId = subtractunits.dataset.id;\r\n        let temperalItem = cart.find((item) => item.id === parseInt(itemId));\r\n        temperalItem.units = temperalItem.units - 1;\r\n        if (temperalItem.units > 0) {\r\n          Storage.saveCurrentCart(cart);\r\n          this.updateSetCartValues(cart);\r\n          subtractunits.previousElementSibling.innerText = temperalItem.units;\r\n\r\n        } else {\r\n          cartContent.removeChild(subtractunits.parentElement.parentElement);\r\n          this.removeThisItem(parseInt(itemId));\r\n        }\r\n       \r\n        \r\n      }\r\n    });\r\n  }\r\n\r\n  clearCart() {\r\n    // Remove all items from the cart array\r\n    cart = [];\r\n    this.updateSetCartValues(cart);\r\n    Storage.saveCurrentCart(cart);\r\n\r\n    // Remove all items from the cart DOM\r\n    while (cartContent.children.length > 0) {\r\n      cartContent.removeChild(cartContent.children[0]);\r\n    }\r\n\r\n    // Enable all add to cart buttons\r\n    buttonsInTheDOM.forEach((button) => {\r\n      button.disabled = false;\r\n      button.innerHTML = `<i class=\"fas fa-shopping-cart\"></i>add to cart`;\r\n    });\r\n\r\n    this.hideCart();\r\n  }\r\n\r\n  removeThisItem(id) {\r\n    console.log(id);\r\n    cart = cart.filter((cartItem) => cartItem.id !== id);\r\n    console.log(cart);\r\n    //console.log(cart);\r\n    this.updateSetCartValues(cart);\r\n    //save cart in local storage\r\n    Storage.saveCurrentCart(cart);\r\n    let button = this.getSingleBtn(id);\r\n    button.disabled = false;\r\n    button.innerHTML = `<i class=\"fas fa-shopping-cart\"></i>add to cart`;\r\n  }\r\n\r\n  getSingleBtn(id) {\r\n    return buttonsInTheDOM.find((button) => button.dataset.id === id);\r\n  }\r\n} // end of UI  class\r\n\r\n//storage\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => {\r\n  const ui = new UI();\r\n  const products = new Products();\r\n  // set up application\r\n  ui.setUpApplication();\r\n  //get all products\r\n  products\r\n    .getProducts()\r\n    .then((products) => {\r\n      ui.displayProducts(products);\r\n\r\n      Storage.saveProducts(products);\r\n    })\r\n    .then(() => {\r\n      ui.getBtnsBag();\r\n      ui.cartFunctionality();\r\n    });\r\n});\r\n//console.log(\"Hello \");\r\n\r\n// hamburger\r\nfunction toggleMenu() {\r\n  document.getElementById(\"primaryNav\").classList.toggle(\"open\");\r\n  document.getElementById(\"hamburgerBtn\").classList.toggle(\"open\");\r\n\r\n}\r\n\r\nconst x = document.getElementById('hamburgerBtn')\r\nx.onclick = toggleMenu;\r\n\r\nasync function loadTemplate(path) {\r\n  let fetchedData = await fetch(path);\r\n  let text = await fetchedData.text();\r\n  return text;\r\n}\r\n"],"names":["$cd34a48581a06664$export$2e2bcd8739ae039","async","result","fetch","items","ok","json","error","console","log","$7f0bff1005cc9729$export$2e2bcd8739ae039","static","products","localStorage","setItem","JSON","stringify","id","parse","getItem","find","product","cart","cartData","$2a0a9d2c002157bd$export$16b3ba5fff8817e","template","parentElement","data","callback","position","clear","insertAdjacentHTML","templateForHeader","loadTemplate","elementForHeader","document","querySelector","templateForFooter","elementForFooter","$54b47fc030b7b21e$var$cartBtn","$54b47fc030b7b21e$var$closeCartButton","$54b47fc030b7b21e$var$clearCartButton","$54b47fc030b7b21e$var$cartDom","$54b47fc030b7b21e$var$cartOverlay","$54b47fc030b7b21e$var$productsInTheDOM","$54b47fc030b7b21e$var$cartIterms","$54b47fc030b7b21e$var$cartTotal","$54b47fc030b7b21e$var$cartContent","$54b47fc030b7b21e$var$cart","$54b47fc030b7b21e$var$buttonsInTheDOM","$54b47fc030b7b21e$var$UI","displayProducts","stock","forEach","image","title","rating","rate","price","innerHTML","getBtnsBag","buttons","querySelectorAll","button","dataset","item","innerText","disabled","addEventListener","event","target","cartItem","getProduct","units","saveCurrentCart","this","updateSetCartValues","addCartItem","showCaseCart","tempTotal","itemsTotal","map","parseFloat","toFixed","div","createElement","classList","add","appendChild","setUpApplication","getCartFromLocalStorage","fillupCart","hideCart","remove","cartFunctionality","clearCart","contains","removeThisItem","itemId","removeChild","parseInt","addunits","temperalItem","nextElementSibling","subtractunits","previousElementSibling","children","length","filter","getSingleBtn","ui","getProducts","then","saveProducts","getElementById","onclick","toggle"],"version":3,"file":"index.ce96ed2d.js.map"}