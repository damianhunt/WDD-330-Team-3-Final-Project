const t=new class{constructor(t,e){this.key=t,this.outputSelector=e,this.list=[],this.itemTotal=0,this.shipping=0,this.tax=0,this.orderTotal=0}init(){this.list=getCartFromLocalStorage(this.key),this.calculateItemSummary()}calculateItemSummary(){const t=document.querySelector(this.outputSelector+" #cartTotal");document.querySelector(this.outputSelector+" #num-items").innerHTML=this.list.length;const e=this.list.map((t=>t.FinalPrice));this.itemTotal=e.reduce(((t,e)=>t+e)),t.innerHTML="$"+this.itemTotal}calculateOrdertotal(){this.shipping=10+2*(this.list.length-1),this.tax=(.06*this.itemTotal).toFixed(2),this.orderTotal=(parseFloat(this.itemTotal)+parseFloat(this.shipping)+parseFloat(this.tax)).toFixed(2),this.displayOrderTotals()}displayOrderTotals(){const t=document.querySelector(this.outputSelector+" #shipping"),e=document.querySelector(this.outputSelector+" #tax"),i=document.querySelector(this.outputSelector+" #orderTotal");t.innerText="$"+this.shipping,e.innerText="$"+this.tax,i.innerText="$"+this.orderTotal}async checkout(){const t=function(t){const e=new FormData(t),i={};return e.forEach((function(t,e){i[e]=t})),i}(document.forms.checkout);t.orderDate=new Date,t.orderTotal=this.orderTotal,t.tax=this.tax,t.shipping=this.shipping,t.items=this.list.map((t=>(console.log(t),{id:t.id,price:t.FinalPrice,name:t.Name,quantity:1}))),console.log(t);try{const e=await services.checkout(t);console.log(e),setLocalStorage("so-cart",[]),location.assign("/checkout/success.html")}catch(t){for(let e in t.message)alertMessage(t.message[e])}}}("so-cart","checkout-summary");t(),document.querySelector("#zip").addEventListener("blur",t.calculateOrdertotal.bind(t)),document.querySelector("#checkoutSubmit").addEventListener("click",(e=>{e.preventDefault();let i=document.forms[0],o=i.checkValidity();i.reportValidity(),o&&t.checkout()}));
//# sourceMappingURL=index.dbadc9ba.js.map
