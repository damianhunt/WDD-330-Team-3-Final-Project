class t{async getProducts(){try{let t=await fetch("https://fakestoreapi.com/products");if(t.ok){return await t.json()}}catch(t){return console.log(t)}}}class e{static saveProducts(t){localStorage.setItem("products",JSON.stringify(t))}static getProduct(t){return JSON.parse(localStorage.getItem("products")).find((e=>e.id==t))}static saveCurrentCart(t){localStorage.setItem("cart",JSON.stringify(t))}static getCartFromLocalStorage(){let t=JSON.parse(localStorage.getItem("cart"));if(null!==t)return t;return[]}}const a=document.querySelector(".cart-btn"),r=document.querySelector(".close-cart"),n=document.querySelector(".clear-cart"),s=(document.querySelector(".nav-icon-cart"),document.querySelector(".cart")),i=document.querySelector(".cart-overlay"),c=document.querySelector(".products-area"),o=document.querySelector(".cart-items"),d=document.querySelector(".cart-total"),l=document.querySelector(".cart-content");let u=[],m=[];class p{displayProducts(t){let e="";t.forEach((t=>{e+=`<article class="product">\n            <div class="img-container">\n              <img src=${t.image} alt="" class="product-img" />\n              <button class="bag-btn" data-id=${t.id}>\n                <i class="fas fa-shopping-cart"></i>\n                add to bag\n              </button>\n            </div>\n            <h3>${t.title}</h3>\n            <P>popularity ${t.rating.rate}</p>\n            <h4>R ${t.price}</h4>\n          </article>`})),c.innerHTML=e}getBtnsBag(){const t=[...document.querySelectorAll(".bag-btn")];m=t,t.forEach((t=>{let a=t.dataset.id;u.find((t=>t.id===a))&&(t.innerText="In Cart",t.disabled=!0),t.addEventListener("click",(t=>{t.target.innerText="In Cart",t.target.disabled=!0;let r={...e.getProduct(a),units:1};u=[...u,r],e.saveCurrentCart(u),this.updateSetCartValues(u),this.addCartItem(r),this.showCaseCart()}))}))}updateSetCartValues(t){let e=0,a=0;t.map((t=>{e+=t.price*t.units,a+=t.units})),d.innerText=parseFloat(e.toFixed(2)),o.innerText=a}addCartItem(t){const e=document.createElement("div");e.classList.add("cart-item"),e.innerHTML=`\n            <img src=${t.image} alt=${t.title}>\n            <div>\n                <h4>${t.title}</h4>\n                <h5>R ${t.price}</h5>\n                <span class="remove-item" data-id=${t.id}>\n        remove\n                </span>\n            </div>\n            <div>\n                <i class="fas fa-chevron-up" data-id=${t.id}></i>\n                <p class="item-amount">${t.units}</p>\n                <i class="fas fa-chevron-down" data-id=${t.id}></i>\n            </div>`,l.appendChild(e)}showCaseCart(){i.classList.add("transparentCover"),s.classList.add("showCaseCart")}setUpApplication(){u=e.getCartFromLocalStorage(),this.updateSetCartValues(u),this.fillupCart(u),a.addEventListener("click",this.showCaseCart),r.addEventListener("click",this.hideCart)}fillupCart(t){t.forEach((t=>{this.addCartItem(t)}))}hideCart(){i.classList.remove("transparentCover"),s.classList.remove("showCaseCart")}cartFunctionality(){n.addEventListener("click",(()=>{this.clearCart()})),l.addEventListener("click",(t=>{if(t.target.classList.contains("remove-item")){let e=t.target,a=e.dataset.id;l.removeChild(e.parentElement.parentElement),this.removeThisItem(parseInt(a))}else if(t.target.classList.contains("fa-chevron-up")){let a=t.target,r=a.dataset.id,n=u.find((t=>t.id===parseInt(r)));n.units=n.units+1,e.saveCurrentCart(u),this.updateSetCartValues(u),a.nextElementSibling.innerText=n.units}else if(t.target.classList.contains("fa-chevron-down")){let a=t.target,r=a.dataset.id,n=u.find((t=>t.id===parseInt(r)));n.units=n.units-1,n.units>0?(e.saveCurrentCart(u),this.updateSetCartValues(u),a.previousElementSibling.innerText=n.units):(l.removeChild(a.parentElement.parentElement),this.removeThisItem(parseInt(r)))}}))}clearCart(){for(u=[],this.updateSetCartValues(u),e.saveCurrentCart(u);l.children.length>0;)l.removeChild(l.children[0]);m.forEach((t=>{t.disabled=!1,t.innerHTML='<i class="fas fa-shopping-cart"></i>add to cart'})),this.hideCart()}removeThisItem(t){console.log(t),u=u.filter((e=>e.id!==t)),console.log(u),this.updateSetCartValues(u),e.saveCurrentCart(u);let a=this.getSingleBtn(t);a.disabled=!1,a.innerHTML='<i class="fas fa-shopping-cart"></i>add to cart'}getSingleBtn(t){return m.find((e=>e.dataset.id===t))}}document.addEventListener("DOMContentLoaded",(()=>{const a=new p,r=new t;a.setUpApplication(),r.getProducts().then((t=>{a.displayProducts(t),e.saveProducts(t)})).then((()=>{a.getBtnsBag(),a.cartFunctionality()}))}));document.getElementById("hamburgerBtn").onclick=function(){document.getElementById("primaryNav").classList.toggle("open"),document.getElementById("hamburgerBtn").classList.toggle("open")};
//# sourceMappingURL=index.e91f021c.js.map
